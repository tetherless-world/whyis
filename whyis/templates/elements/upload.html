{% from "_macros.html" import get_label %}
{% macro upload_button_modal(resource) %}
{% if g.current_user and g.current_user.is_authenticated %}
<button type="button" class="btn btn-secondary btn-sm" aria-label="Upload File" title="Upload File" data-mdb-toggle="modal" data-mdb-target="#uploadModal">
  <i class="material-icons">file_upload</i>
</button>
<div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="uploadModalLabel">
  <div class="modal-dialog" role="document">
    <form class="modal-content" action="" method="post" enctype="multipart/form-data">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadModalLabel">Upload File for {{get_label(resource)}}</h4>
      </div>
      <div class="modal-body">
        <p>
          <div class="form-group">
            <label class="radio-inline">
              <input type="radio" name="upload_type" selected="selected" value="http://purl.org/net/provenance/ns#File">Single File
            </label>
            <label class="radio-inline">
              <input type="radio" name="upload_type" value="http://purl.org/dc/dcmitype/Collection"> Collection
            </label>
            <label class="radio-inline">
              <input type="radio" name="upload_type" value="http://www.w3.org/ns/dcat#Dataset"> Dataset
            </label>
          </div>
          <div class="form-group">
            <input name="file" type="file" class="file" multiple>
          </div>
        </p>
      </div>
    </form>
  </div>
</div>
{% endif %}
{% endmacro %}

{% macro upload_button_tab_modal(resource) %}
{% if g.current_user and g.current_user.is_authenticated %}
<a class="nav-link" aria-label="Upload file for this entity" title="Upload file for this entity." data-toggle="modal" data-target="#uploadModal">
    Upload
</a>
<div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="uploadModalLabel">
  <div class="modal-dialog" role="document">
    <form class="modal-content" action="" method="post" enctype="multipart/form-data">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="uploadModalLabel">Upload File for {{get_label(resource)}}</h4>
      </div>
      <div class="modal-body">
        <p>
          <div class="form-group">
            <label class="radio-inline">
              <input type="radio" name="upload_type" selected="selected" value="http://purl.org/net/provenance/ns#File">Single File
            </label>
            <label class="radio-inline">
              <input type="radio" name="upload_type" value="http://purl.org/dc/dcmitype/Collection"> Collection
            </label>
            <label class="radio-inline">
              <input type="radio" name="upload_type" value="http://www.w3.org/ns/dcat#Dataset"> Dataset
            </label>
          </div>
          <div class="form-group">
            <input name="file" type="file" class="file" multiple>
          </div>
        </p>
      </div>
    </form>
  </div>
</div>
{% endif %}
{% endmacro %}


{% macro vue_upload_button_tab_modal(resource) %}
{% if g.current_user and g.current_user.is_authenticated %}
<a class="nav-link" href="#" aria-label="Upload file for this entity" title="Upload file for this entity." @click="showUploadDialog = true">
    Upload
</a>

<!-- Bootstrap Modal for Vue -->
<div class="modal fade" :class="{ show: showUploadDialog }" tabindex="-1" v-show="showUploadDialog" @click.self="showUploadDialog = false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Upload File for {{get_label(resource)}}</h5>
                <button type="button" class="btn-close" @click="showUploadDialog = false" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="upload_form" enctype="multipart/form-data" novalidate method="post" action="">
                    <div class="mb-3">
                        <label for="upload_type" class="form-label">Upload Type</label><br/>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="upload_type" checked value="http://purl.org/net/provenance/ns#File" id="file-radio">
                            <label class="form-check-label" for="file-radio">Single File</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="upload_type" value="http://purl.org/dc/dcmitype/Collection" id="collection-radio">
                            <label class="form-check-label" for="collection-radio">Collection</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="upload_type" value="http://www.w3.org/ns/dcat#Dataset" id="dataset-radio">
                            <label class="form-check-label" for="dataset-radio">Dataset</label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="file-input" class="form-label">Files</label>
                        <input type="file" class="form-control" name="file" multiple id="file-input" placeholder="Add files here.">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" @click="showUploadDialog = false">Close</button>
                <button type="submit" class="btn btn-primary" form="upload_form">Upload</button>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endmacro %}
